{"version":3,"sources":["webpack://shield-http/webpack/universalModuleDefinition","webpack://shield-http/webpack/bootstrap","webpack://shield-http/./node_modules/querystringify/index.js","webpack://shield-http/./node_modules/url-join/lib/url-join.js","webpack://shield-http/./src/constant.js","webpack://shield-http/./src/http.ext.js","webpack://shield-http/./src/icode.js","webpack://shield-http/./src/index.js"],"names":["Methods","POST","GET","PUT","DELETE","PATCH","ContentType","NORMAL","RESTFUL","emptyFunction","HttpExt","options","auth","Object","assign","progress","silent","timeout","defaultError","apiPrefix","envTransferType","injectHeaders","$code","$auth","headerConfig","isStream","undefined","headers","getToken","getInfoFunc","getSystemInfo","envParams","call","arguments","token","bizurl","params","apiUrl","pathPrefix","key","stringify","getPramas","str","console","log","config","that","loadingBar","showRequestState","promise","Promise","resolve","reject","msgErrId","msgErrTag","originalRequest","url","method","data","header","cache","success","response","resp","hideRequestState","retCode","getResponseBizCode","isSuccess","getResponseData","report","errResult","processBizError","showError","message","biz","fail","proccessHttpError","getReponseHttpStatus","JSON","opts","urlParam","cacheKey","getCacheKey","mixUrl","toString","request","Math","random","substring","icode","$successCode","successCode","$status","status","$bizcode","codes","assembleErrorMsg","error","code","codeVal","retErr","i","length","_code","val","checkVal","typename","apply","RegExp","test"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1EA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA,mBAAmB,qBAAqB;AACxC;;AAEA;AACA;AACA;;AAEA,6BAA6B,UAAU;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA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","file":"shield-http.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"shield-http\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"shield-http\"] = factory();\n\telse\n\t\troot[\"shield-http\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  return decodeURIComponent(input.replace(/\\+/g, ' '));\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    if (key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = [];\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      pairs.push(encodeURIComponent(key) +'='+ encodeURIComponent(obj[key]));\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","(function (name, context, definition) {\n  if (typeof module !== 'undefined' && module.exports) module.exports = definition();\n  else if (typeof define === 'function' && define.amd) define(definition);\n  else context[name] = definition();\n})('urljoin', this, function () {\n\n  function normalize (strArray) {\n    var resultArray = [];\n\n    // If the first part is a plain protocol, we combine it with the next part.\n    if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n      var first = strArray.shift();\n      strArray[0] = first + strArray[0];\n    }\n\n    // There must be two or three slashes in the file protocol, two slashes in anything else.\n    if (strArray[0].match(/^file:\\/\\/\\//)) {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n    } else {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n    }\n\n    for (var i = 0; i < strArray.length; i++) {\n      var component = strArray[i];\n\n      if (typeof component !== 'string') {\n        throw new TypeError('Url must be a string. Received ' + component);\n      }\n\n      if (component === '') { continue; }\n\n      if (i > 0) {\n        // Removing the starting slashes for each component but the first.\n        component = component.replace(/^[\\/]+/, '');\n      }\n      if (i < strArray.length - 1) {\n        // Removing the ending slashes for each component but the last.\n        component = component.replace(/[\\/]+$/, '');\n      } else {\n        // For the last component we will combine multiple slashes to a single one.\n        component = component.replace(/[\\/]+$/, '/');\n      }\n\n      resultArray.push(component);\n\n    }\n\n    var str = resultArray.join('/');\n    // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n    // remove trailing slash before parameters or hash\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n    // replace ? in parameters with &\n    var parts = str.split('?');\n    str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\n\n    return str;\n  }\n\n  return function () {\n    var input;\n\n    if (typeof arguments[0] === 'object') {\n      input = arguments[0];\n    } else {\n      input = [].slice.call(arguments);\n    }\n\n    return normalize(input);\n  };\n\n});\n","/**\n * http method\n */\nexport let Methods = {\n  POST: 'POST',\n  GET: 'GET',\n  PUT: 'PUT',\n  DELETE: 'DELETE',\n  PATCH: 'PATCH'\n};\n\n/**\n * http-content-type\n * @type {{NORMAL: string, RESTFUL: string}}\n */\nexport let ContentType = {\n  NORMAL: 'application/x-www-form-urlencoded',\n  RESTFUL: 'application/json;charset=utf-8'\n\n};\n","import urljoin from 'url-join';\nimport Params from 'querystringify';\nimport {Methods, ContentType} from './constant';\n\nimport ICode from './icode';\n\nlet emptyFunction = function () {\n};\n\nexport default class HttpExt {\n\n  /**\n   * options:{\n     *  apiPrefix:'api前缀'\n     *  successCode:200,\n     *  codes:[\n     *      {\n     *          val:1000,\n     *          message:'逻辑问题描述'\n     *      }\n     *  ],\n     *  error:function(){\n     *      错误处理方式\n     *  }\n     *\n     * }\n   * @param options\n   */\n  constructor(options, auth) {\n\n    this.options = Object.assign({\n      progress: true,\n      silent: false,\n      timeout: 100000,\n      defaultError: '报错啦'\n    }, options);\n    this.apiPrefix = options.apiPrefix;\n    this.envTransferType = options.envTransferType;\n\n    this.injectHeaders();\n\n    this.$code = new ICode(this.options);\n\n    /**\n     * 确保有以下几种方式:\n     * getToken\n     * setToken\n     * clear\n     */\n    this.$auth = auth;\n  }\n\n  /**\n   * 设置头部 header 变量\n   */\n  injectHeaders() {\n    let headerConfig = {};\n\n    if (this.options.isStream) {\n      headerConfig = undefined; // 'application/octet-stream';\n    } else {\n      headerConfig['content-type'] = ContentType.RESTFUL;\n    }\n    this.headers = Object.assign({}, headerConfig, this.options.headers);\n\n  }\n\n  getToken() {\n    return this.$auth.getToken ? this.$auth.getToken() : null;\n  }\n\n  getSystemInfo() {\n    /**\n     {\n           callerApp: \"ICRMCLIENT\",\n           pageUrl: getCurrentPage(),\n           userType: 'BANK_CUSTOMER'\n       }\n     *\n     */\n    let getInfoFunc = this.options.getSystemInfo;\n    let envParams = getInfoFunc.call(this, ...arguments);\n\n    let token = this.getToken();\n\n    if (token) {\n      envParams['token'] = token;\n    }\n    return envParams;\n  }\n\n  mixUrl(bizurl, params = {}, apiUrl) {\n\n    let envParams = this.getSystemInfo();\n\n    let pathPrefix = this.options.pathPrefix || '';\n\n    if (this.envTransferType === 'HEADER') {\n\n      for (let key in envParams) {\n        this.headers[key] = envParams[key];\n      }\n      return urljoin((apiUrl || this.apiPrefix), pathPrefix, bizurl, Params.stringify(params, '?'));\n    }\n    let getPramas = Object.assign({}, envParams, params);\n\n    return urljoin((apiUrl || this.apiPrefix), pathPrefix, bizurl, Params.stringify(getPramas, '?'));\n\n  }\n\n  log(str) {\n    console.log(str);\n  }\n\n  /**\n   * http的封装\n   * @param opts:{\n *\n *  cache:{       //cache不传则不开启\n *    exp:1,      //0 不开启\n *    read:-1,    //-1不开启\n *  }\n * }\n   * @param parseFunc\n   * @returns {*}\n   */\n  request(config) {\n    let that = this;\n    let headerConfig = Object.assign({}, this.headers, config.headers);\n\n    let loadingBar = config.progress === undefined ? this.options.progress : !!config.progress;\n    let silent = config.silent === undefined ? this.options.silent : !!config.silent;\n\n    this.showRequestState(loadingBar);\n\n    let promise = new Promise(function (resolve, reject) {\n\n      reject = reject || emptyFunction;\n      let msgErrId = that.msgErrTag();\n\n      that.originalRequest({\n        url: config.url,\n        method: config.method || Methods.GET,\n        data: config.data || {},\n        header: headerConfig,\n        cache: false,\n        timeout: that.options.timeout,\n\n        success: function (response) {\n\n          let resp = response.data;\n\n          that.hideRequestState();\n\n          let retCode = that.getResponseBizCode(resp);\n\n          if (that.$code.isSuccess(retCode)) {\n            resolve(that.getResponseData(resp));\n          } else {\n\n            that.report(response);\n            if (!silent) {\n              let errResult = that.$code.processBizError(retCode);\n\n              if (errResult) {\n                that.showError(errResult.message || that.options.defaultError);\n              }\n\n            }\n\n            reject({response, msgErrId, biz: 1});\n          }\n        },\n        fail: function (response) {\n\n          that.hideRequestState();\n          that.report(response);\n          if (!silent) {\n            let errResult = that.$code.proccessHttpError(that.getReponseHttpStatus(response));\n\n            if (errResult) {\n              that.showError(errResult.message || that.options.defaultError);\n            }\n          }\n\n          reject({response, msgErrId});\n\n        }\n      });\n\n    });\n\n    return promise;\n  }\n\n  getCacheKey(url, data) {\n    return url + JSON.stringify(data);\n  }\n\n  $post(url, data = {}, opts = {}, urlParam = {}) {\n\n    let cacheKey = this.getCacheKey(url, data);\n\n    opts.url = this.mixUrl(url, Object.assign({}, urlParam), opts.apiUrl);\n    opts.cacheKey = cacheKey;\n    opts.method = Methods.POST;\n\n    if (data.toString() === '[object Array]') {\n      opts.data = data;\n    } else {\n      opts.data = Object.assign({}, data);\n    }\n\n    return this.request(opts);\n  }\n\n  $get(url, data = {}, opts = {}) {\n    let params = Object.assign({}, data);\n    let cacheKey = this.getCacheKey(url, data);\n\n    opts.url = this.mixUrl(url, params, opts.apiUrl);\n    opts.cacheKey = cacheKey;\n    opts.method = Methods.GET;\n\n    return this.request(opts);\n  }\n\n  msgErrTag() {\n    return Math.random().toString(36).substring(2, 15);\n  }\n\n  // ////////////////////////////////////  需要根据实际情况重载  //////////////////////////////////////////////////////\n  showRequestState(loadingBar) {\n\n    //\n  }\n\n  hideRequestState() {\n    /*\n\n                if (loadingBar) {\n                    AjaxLoading.close()\n                }\n     */\n  }\n\n  showError(resp) {\n\n    // dialog.alert(resp.retMessage || resp.exception || \"服务器错误\")\n\n  }\n\n  report() {\n\n  }\n\n  getResponseData(resp) {\n\n  }\n\n  getResponseBizCode(resp) {\n\n  }\n\n  getReponseHttpStatus(response) {\n\n    return null;\n  }\n\n  // //////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n  originalRequest(options) {\n    // this.assembleRequestOptions(options)\n\n  }\n\n}\n","/**\n * code判断\n * 假定:code是数字来设计的\n */\nexport default class icode {\n\n  constructor(options) {\n    this.$successCode = options.successCode;\n    this.$status = options.status || [];\n    /**\n     * code=[{\n         *  val:11111,\n         *  message:\"1111111111111\"\n         *\n         *\n         * }]\n     * @type {*|Array}\n     */\n    this.$bizcode = options.codes || [];\n    /**\n     * return {\n         *      message:xxxx\n         *\n         * }\n     * @type {*|Error|MediaError|Function}\n     */\n    this.assembleErrorMsg = options.error || function () {\n    };\n\n  }\n\n  isSuccess(code) {\n    if (typeof this.$successCode === 'string') {\n      if (this.$successCode === code) {\n        return true;\n      }\n      return false;\n\n    }\n    // 比如200位成功,大于200都算成功,小于200算失败\n    if (this.$successCode <= code) {\n      return true;\n    }\n    return false;\n\n  }\n\n  proccessHttpError(codeVal) {\n    let retErr = null;\n\n    for (let i = 0; i < this.$status.length; i++) {\n      let _code = this.$status[i];\n\n      if (_code.val === codeVal) {\n        retErr = _code;\n        break;\n      }\n    }\n\n    if (retErr) {\n\n      return {\n        message: retErr.message\n      };\n    }\n    return null;\n\n  }\n\n  processBizError(codeVal) {\n    let retErr = null;\n    let that = this;\n\n    for (let i = 0; i < this.$bizcode.length; i++) {\n      let _code = this.$bizcode[i];\n      let checkVal = _code.val;\n\n      let typename = typeof checkVal;\n\n      if (typename === 'function') {\n\n        if (checkVal.apply(that, [codeVal])) {\n          retErr = _code;\n          break;\n        }\n\n      } else if (checkVal instanceof RegExp) {\n        if (checkVal.test(codeVal)) {\n          retErr = _code;\n          break;\n        }\n      } else if (_code.val === codeVal) {\n        retErr = _code;\n        break;\n      }\n    }\n\n    if (retErr) {\n      this.assembleErrorMsg(retErr);\n      return {};\n    }\n    return null;\n\n  }\n\n}\n","import HttpExt from './http.ext.js';\n\nexport {HttpExt};\n"],"sourceRoot":""}